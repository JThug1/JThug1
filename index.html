 <!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>GambleX</title>
  <script src="https://cdn.jsdelivr.net/npm/react@18.2.0/umd/react.production.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/react-dom@18.2.0/umd/react-dom.production.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/babel-standalone@7.22.10/babel.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body>
  <div id="root"></div>
  <script type="text/babel">
    const { useState } = React;

    const apiBaseUrl = 'http://localhost:5000/api';

    // Login Component
    function Login({ setUser }) {
      const [email, setEmail] = useState('');
      const [password, setPassword] = useState('');

      const handleLogin = async (e) => {
        e.preventDefault();
        const res = await fetch(`${apiBaseUrl}/login`, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ email, password }),
        });
        const data = await res.json();
        if (data.success) {
          localStorage.setItem('token', data.token);
          setUser(data.user);
        } else {
          alert('Login failed');
        }
      };

      return (
        <div className="max-w-sm mx-auto p-4 bg-gray-100 rounded">
          <h2 className="text-xl font-bold">Login</h2>
          <form onSubmit={handleLogin}>
            <input
              type="email"
              value={email}
              onChange={(e) => setEmail(e.target.value)}
              placeholder="Email"
              className="w-full p-2 mb-2 border"
              required
            />
            <input
              type="password"
              value={password}
              onChange={(e) => setPassword(e.target.value)}
              placeholder="Password"
              className="w-full p-2 mb-2 border"
              required
            />
            <button className="w-full bg-blue-500 text-white p-2 rounded">Login</button>
          </form>
        </div>
      );
    }

    // Balance Component
    function Balance({ user, setUser }) {
      const [amount, setAmount] = useState('');
      const [action, setAction] = useState('deposit');

      const handleTransaction = async () => {
        const res = await fetch(`${apiBaseUrl}/${action}`, {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
            'Authorization': `Bearer ${localStorage.getItem('token')}`,
          },
          body: JSON.stringify({ amount: parseFloat(amount) }),
        });
        const data = await res.json();
        if (data.success) {
          setUser({ ...user, balance: data.balance });
          alert(`${action} done!`);
        } else {
          alert('Failed');
        }
      };

      return (
        <div className="max-w-sm mx-auto p-4 bg-gray-100 rounded">
          <h2 className="text-xl font-bold">Balance: ${user.balance}</h2>
          <input
            type="number"
            value={amount}
            onChange={(e) => setAmount(e.target.value)}
            placeholder="Amount"
            className="w-full p-2 mb-2 border"
          />
          <select value={action} onChange={(e) => setAction(e.target.value)} className="w-full p-2 mb-2 border">
            <option value="deposit">Deposit</option>
            <option value="withdraw">Withdraw</option>
          </select>
          <button onClick={handleTransaction} className="w-full bg-green-500 text-white p-2 rounded">
            {action}
          </button>
        </div>
      );
    }

    // Mines Component
    function Mines() {
      const [bet, setBet] = useState(1);
      const [grid, setGrid] = useState(Array(9).fill(null));
      const [gameOver, setGameOver] = useState(false);

      const startGame = async () => {
        const res = await fetch(`${apiBaseUrl}/mines`, {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
            'Authorization': `Bearer ${localStorage.getItem('token')}`,
          },
          body: JSON.stringify({ bet }),
        });
        const data = await res.json();
        if (data.success) {
          setGrid(Array(9).fill(null));
          setGameOver(false);
        } else {
          alert('Low balance');
        }
      };

      const revealTile = async (index) => {
        if (gameOver || grid[index]) return;
        const res = await fetch(`${apiBaseUrl}/mines/reveal`, {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
            'Authorization': `Bearer ${localStorage.getItem('token')}`,
          },
          body: JSON.stringify({ index }),
        });
        const data = await res.json();
        if (data.success) {
          const newGrid = [...grid];
          newGrid[index] = data.result;
          setGrid(newGrid);
          if (data.result === 'bomb') {
            setGameOver(true);
            alert('Boom! Game over.');
          } else if (data.won) {
            setGameOver(true);
            alert(`Won $${data.payout}!`);
          }
        }
      };

      return (
        <div className="max-w-sm mx-auto p-4 bg-gray-100 rounded">
          <h2 className="text-xl font-bold">Mines</h2>
          <input
            type="number"
            value={bet}
            onChange={(e) => setBet(e.target.value)}
            placeholder="Bet"
            className="w-full p-2 mb-2 border"
          />
          <button onClick={startGame} className="w-full bg-blue-500 text-white p-2 rounded mb-2">
            Start
          </button>
          <div className="grid grid-cols-3 gap-1">
            {grid.map((tile, i) => (
              <button
                key={i}
                onClick={() => revealTile(i)}
                className={`p-3 border ${tile === 'bomb' ? 'bg-red-500' : tile === 'safe' ? 'bg-green-500' : 'bg-gray-200'}`}
                disabled={gameOver || tile}
              >
                {tile || '?'}
              </button>
            ))}
          </div>
        </div>
      );
    }

    // Case Battles Component
    function CaseBattles() {
      const [bet, setBet] = useState(1);
      const [result, setResult] = useState(null);

      const startBattle = async () => {
        const res = await fetchLARGER_THAN_3000_CHARACTERS